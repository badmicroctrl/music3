# music3
## 一、项目概述
**项目名称**：  
原创歌曲NFT平台

**项目简述**：  
该平台致力于为原创音乐创作者提供一个去中心化的市场，允许他们通过区块链技术将歌曲铸造成NFT，并与听众直接交易。平台通过智能合约和去中心化存储技术确保音乐版权的保护和透明的收益分成机制。

---

## 二、项目背景和需求分析
### 1. **市场痛点**
- 传统音乐行业的版权保护机制复杂，创作者往往不能直接获得应得的收益。
- 中间商抽成较高，创作者难以享受直接经济回报。
- 盗版问题猖獗，数字音乐的版权难以有效保护。
- 独立音乐人难以通过传统平台推广和变现。

### 2. **解决方案**
通过区块链技术和NFT，平台提供了以下功能：
- 保护原创歌曲版权，使用去中心化存储和加密播放技术确保只有授权用户可以播放作品。
- 允许用户通过购买或拍卖NFT的方式支持创作者，收益直接归创作者所有。
- 通过智能合约自动化收益分成，确保每次交易时创作者能够获得相应收益。

---

## 三、平台功能模块
### 1. **NFT 铸造模块**
- 创作者可以上传原创音乐文件，并将其铸造成NFT。每个NFT代表该作品的数字版权和交易权利。
- 在铸造NFT的过程中，平台设有 **助力账户**。该账户由平台通过算法从部分收益中存入资金。创作者在铸造NFT时，可以选择让助力账户承担部分铸造费用，最高比例由平台设定（例如最多可承担50%），但不能全额承担，以防滥用。
- **收益分成影响**：创作者使用助力账户支付费用后，其未来该歌曲的收益分成可能会相应降低，以平衡助力资金的使用。具体的收益分成调整比例基于使用助力账户承担的费用比例。

### 2. **交易模块**
- 听众可以通过平台购买或拍卖NFT。NFT的价格由创作者设定，或者通过拍卖机制由市场决定。
- 平台提供二级市场，允许NFT的持有者转售其所拥有的NFT，创作者可以在转售时持续获得一定比例的分成（例如10%）。
  
### 3. **订阅与质押机制**
- 听众可以通过订阅制支付费用获得平台上的歌曲播放权限。订阅制提供两种选择：
  - **定期付费订阅**：每月或每年支付固定费用来访问平台上的音乐。
  - **质押订阅**：听众可以质押一定量的加密货币（例如SOL），质押期间解锁订阅权限，质押期结束后可以赎回质押资产。
- 听众还可以通过购买特定歌曲的NFT来永久获得该歌曲的播放权限，并在二级市场转售NFT时获得收益。

### 4. **打赏与广告投放模块**
- 听众可以向喜爱的创作者和歌曲进行打赏，直接奖励给创作者。平台从打赏中抽取一定比例作为手续费。
- **广告投放机制**：听众可以通过支付广告费提升某首歌曲的曝光率和平台上的排名，帮助该歌曲获得更多的关注。创作者也可以为自己的作品投广告。
- **抽奖机制**：投放广告费的粉丝将进入抽奖池，平台会将广告收益分成固定的几份（如10份），通过抽奖回馈给投放广告的粉丝。这种机制确保中奖粉丝获得实际收益，同时激励更多用户参与。

### 5. **去中心化存储与加密播放**
- 音乐文件通过去中心化存储平台（如IPFS或Arweave）进行存储，确保文件的安全性和不可篡改性。
- 为了保护音乐版权，上传的音频文件会在存储前进行加密，播放时Flutter客户端会调用后端API获取解密密钥并在本地解密后播放。只有拥有该NFT的用户可以解密播放音乐，确保版权得到严格保护。

---

## 四、技术架构
### 1. **后端技术选型**：Axum + Shuttle.rs
- **Axum**：后端采用 Rust 的 Axum 框架，用于构建高性能的HTTP API。Axum结合Tokio异步运行时，能够高效处理并发请求，适合处理高并发的NFT铸造和交易场景。
- **Shuttle.rs**：后端通过 Shuttle.rs 平台进行自动化部署，支持免费发布和托管服务。Shuttle.rs 集成了数据库和日志服务，方便开发者进行管理和监控。

### 2. **前端技术选型**：Flutter
- **Flutter**：前端使用 Flutter 框架开发，支持跨平台移动客户端，确保在 iOS 和 Android 上提供一致的用户体验。
- **与后端通信**：Flutter 客户端通过 HTTP 与 Axum 后端交互，处理用户登录、歌曲上传、NFT交易等业务。

### 3. **文件存储与加密**：
- **去中心化存储**：音频文件通过 IPFS 或 Arweave 等去中心化平台存储，确保文件安全并防止中心化平台的风险。
- **加密与解密**：上传时音频文件将通过对称加密算法加密，只有持有合法权限的用户才能在客户端播放时解密。

### 4. **智能合约开发**：Solana + Anchor 框架
- **Solana 区块链**：平台使用 Solana 作为底层区块链来支持高效、低成本的NFT铸造和交易。
- **Anchor 框架**：智能合约使用 Solana 上的 Anchor 框架进行开发。Anchor 提供了一套标准化工具集，简化了智能合约的开发流程，并通过 Rust 提供安全性和高效性。所有与NFT铸造、交易、收益分成的逻辑都将在Anchor框架下的智能合约中实现。

---

## 五、助力账户机制
- 平台设有 **助力账户**，其中的资金来源于平台部分收益的自动分配。创作者在铸造NFT时可以选择让助力账户承担部分铸造费用（例如最多50%），但不能全额承担，以防止恶意滥用。
- 使用助力账户的创作者在未来该歌曲的收益分成比例可能会降低。收益分成调整将根据使用助力账户承担的费用比例来计算。例如，助力账户承担50%的铸造费用，未来该歌曲收益的分成可能相应减少20%至30%。

---

## 六、榜单机制
为提升用户参与度和创作者的收益，平台将推出多种榜单机制，以下为具体设计：

### 1. **播放榜（核心榜单）**
- **榜单说明**：直接反映歌曲的受欢迎程度，基于歌曲的播放次数来排名。
- **更新频率**：日榜、周榜和月榜，确保新老作品都有机会。
- **数据统计**：
  - **日榜**：过去24小时内播放次数最多的歌曲。
  - **周榜**：过去7天内播放次数累计最多的歌曲。
  - **月榜**：过去30天内播放次数累计最多的歌曲。
- **展示内容**：显示前100名播放次数最多的歌曲，展示歌曲封面、创作者、播放次数和排名变化。
- **用户体验**：提供过滤功能，可以按歌曲类型、创作者类别、发行时间等进行筛选，让用户更容易找到感兴趣的内容。

### 2. **打赏榜（核心榜单）**
- **榜单说明**：通过用户对歌曲或创作者的打赏来排名，展示打赏总金额最高的作品或创作者。
- **加权打赏机制**：大额打赏和持续打赏将获得额外权重。例如：
  - 超过100 SOL的单次打赏可以获得1.5倍的权重。
  - 连续多日打赏某一创作者或作品的用户可以获得额外的累积权重。
- **更新频率**：日榜、周榜和月榜，与播放榜保持一致。
- **数据统计**：
  - **日榜**：过去24小时内打赏金额累计最多的作品或创作者。
  - **周榜**：过去7天内打赏金额累计最多的作品或创作者。
  - **月榜**：过去30天内打赏金额累计最多的作品或创作者。
- **展示内容**：显示前100名打赏金额最高的歌曲或创作者，展示打赏金额、排名变化、以及打赏最高的粉丝。
- **用户体验**：鼓励用户在打赏时留下个性化信息或

留言，增强互动性。同时，每周抽取打赏榜上的活跃用户给予奖励。

### 3. **NFT交易榜（核心榜单）**
- **榜单说明**：展示转手次数最多或交易额增长最快的音乐NFT，反映其市场流动性和投资价值。
- **更新频率**：日榜、周榜和月榜。
- **数据统计**：
  - **日榜**：过去24小时内转手次数最多或交易金额最高的NFT。
  - **周榜**：过去7天内交易额增长最快或转手次数最多的NFT。
  - **月榜**：过去30天内累计交易金额最高或转手次数最多的NFT。
- **展示内容**：展示前100名交易最活跃的NFT，显示NFT持有者、交易次数、交易金额和创作者信息。
- **用户体验**：为每个NFT提供详细的交易历史记录，并显示与其相关的市场分析，帮助用户了解其投资潜力。

### 4. **新晋创作者榜（辅助榜单）**
- **榜单说明**：帮助新创作者获得曝光，展示最近发布作品的创作者。
- **排名依据**：通过综合播放次数、打赏金额、粉丝增长数等多维度数据进行排名。
- **更新频率**：周榜和月榜。
- **数据统计**：
  - **周榜**：过去7天内发布新作品的创作者，根据其综合表现进行排名。
  - **月榜**：过去30天内发布新作品的创作者，根据综合数据排名。
- **展示内容**：展示前50名新创作者，显示其作品、播放次数、打赏金额和粉丝数量等。
- **用户体验**：增加新创作者的推荐机制，帮助这些创作者获得更多曝光机会，吸引新创作者加入平台。

### 5. **粉丝贡献榜（辅助榜单）**
- **榜单说明**：展示为平台做出重要贡献的粉丝，反映其对社区的支持和活跃度。
- **排名依据**：通过打赏、分享、评论、推广等行为进行排名，综合这些数据体现用户贡献。
- **更新频率**：周榜和月榜。
- **数据统计**：
  - **周榜**：过去7天内根据粉丝贡献的各类行为积分进行排名。
  - **月榜**：过去30天内的粉丝贡献行为积分排名。
- **展示内容**：显示前100名粉丝，展示其用户名、贡献行为（打赏总额、分享次数等）以及他们支持的创作者。
- **用户体验**：提供专属粉丝徽章和奖励机制，鼓励粉丝在社区中更加活跃，并通过排行榜上的排名变化来激发竞争。
